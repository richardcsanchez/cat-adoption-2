<% if flash[:notice] %>
    <h4><div class="notice"><%= flash[:notice] %></div><h4>
<% end %>
<div class="cat-info">
<h1 class="name"><%=@cat.name%></h1>
<h4 class="agency"><%=@cat.agency.name%></h4>
<h4>Breed:</h4> <p class="breed"><%=@cat.breed%></p>
<h4>Sex:</h4><p class="sex"><%=@cat.sex%></p>
<h4>Age:</h4><p class="age"><%=@cat.age%> Years Old</p>
<h4> Cat-itude:</h4><p class="disposition"><%=@cat.disposition%></p>
<h4> Spayed/Neutered?</h4> <p class="neutered"><%status = @cat.neutered%></p>
<h4> Cost to Adopt ($):</h4> <p class="cost">$<%=@cat.cost%></p>
<h4>Owner:</h4>
<div class="owner_id">
  <% if @cat.owner_id != nil %>
     <p> <%= @cat.owner_name%></p>
  <%elsif @cat.owner_id == nil%>
    <p>This cat hasn't been adopted yet!</p>
  <%end%>
  </div>
<img class="image" src="<%=@cat.image%>" title="<%=@cat.name%>" />
</div>
<br>
<br>
<br>
<br>
<br>
<br>
<% if !@cat.adopted?%>
<h4><%= link_to 'Adopt Me!', adopt_cat_path(@cat)%></h4>
<%end%>
<br>
<br>
<button class="js-next" data-id="<%= @cat.id %>" agency-id="<%= @cat.agency_id%>">Next Cat</button>
<button class="js-previous" data-id="<%= @cat.id %>" agency-id="<%= @cat.agency_id%>">Previous Cat</button>


<% if current_user.admin? || @cat.owner_id == current_user.id %>
<%= link_to "Edit Cat", edit_agency_cat_path(@cat)%>
<%= link_to 'Delete',
             cat_path(@cat),
                         method: :delete,
                         data: { confirm: 'Are you sure?' } %>
<%end%>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script type="text/javascript" charset="utf-8">
$(function () {
  $(".js-next").on("click", function() {
    var nextId = parseInt($(".js-next").attr("data-id")) + 1;
    var agencyId = parseInt($(".js-next").attr("agency-id"))
    $.getJSON("/agencies/" + agencyId + "/cats/" + nextId + ".json", function(data) {
      $(".name").text(data["name"]);
      $(".agency").text(data["agency"]["name"])
      $(".breed").text(data["breed"]);
      $(".sex").text(data["sex"]);
      $(".age").text(data["age"]);
      $(".disposition").text(data["disposition"]);
      $(".neutered").text(data["neutered"]);
      $(".cost").text(data["cost"]);
      $(".owner_id").text(data["owner_id"]);
      $(".image").text(data["image"]);

      $(".js-next").attr("data-id", data["id"]);
    });
  });
});

$(function () {
  $(".js-previous").on("click", function() {
    var previousId = parseInt($(".js-next").attr("data-id")) - 1;
    var agencyId = parseInt($(".js-previous").attr("agency-id"))
    $.getJSON("/agencies/" + agencyId + "/cats/" + previousId + ".json", function(data) {
      $(".name").text(data["name"]);
      $(".agency").text(data["agency"]["name"])
      $(".breed").text(data["breed"]);
      $(".sex").text(data["sex"]);
      $(".age").text(data["age"]);
      $(".disposition").text(data["disposition"]);
      $(".neutered").text(data["neutered"]);
      $(".cost").text(data["cost"]);
      $(".owner_id").text(data["owner_id"]);
      $(".image").text(data["image"]);


      $(".js-previous").attr("data-id", data["id"]);
    });
  });
});

</script>
